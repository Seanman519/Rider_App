{"ast":null,"code":"import _asyncToGenerator from \"/Users/chineduetoh/Desktop/IONIC PROJECTS/Go_Rider/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { __decorate } from \"tslib\";\nimport __NG_CLI_RESOURCE__0 from \"./profile.page.html?ngResource\";\nimport __NG_CLI_RESOURCE__1 from \"./profile.page.scss?ngResource\";\nimport { Component } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { Camera, CameraResultType, CameraSource } from '@capacitor/camera';\nimport { LoadingController, AlertController, NavController } from '@ionic/angular';\nimport { AuthService } from 'src/app/services/auth.service';\nimport { AvatarService } from 'src/app/services/avatar.service';\nlet ProfilePage = class ProfilePage {\n  constructor(avatarService, authService, router, loadingController, alertController, nav) {\n    this.avatarService = avatarService;\n    this.authService = authService;\n    this.router = router;\n    this.loadingController = loadingController;\n    this.alertController = alertController;\n    this.nav = nav;\n    this.profile = null;\n  }\n\n  logout() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      yield _this.authService.logout();\n\n      _this.router.navigateByUrl('/', {\n        replaceUrl: true\n      });\n    })();\n  }\n\n  goBack() {\n    this.nav.pop();\n  }\n\n  ngOnInit() {}\n\n  changeImage() {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      const image = yield Camera.getPhoto({\n        quality: 90,\n        allowEditing: false,\n        resultType: CameraResultType.Base64,\n        source: CameraSource.Camera // Camera, Photos or Prompt!\n\n      });\n\n      if (image) {\n        const loading = yield _this2.loadingController.create();\n        yield loading.present();\n        const result = yield _this2.avatarService.uploadImage(image, _this2.avatarService.profile.uid);\n        loading.dismiss();\n\n        if (!result) {\n          const alert = yield _this2.alertController.create({\n            header: 'Upload failed',\n            message: 'There was a problem uploading your avatar.',\n            buttons: ['OK']\n          });\n          yield alert.present();\n        }\n      }\n    })();\n  }\n\n};\n\nProfilePage.ctorParameters = () => [{\n  type: AvatarService\n}, {\n  type: AuthService\n}, {\n  type: Router\n}, {\n  type: LoadingController\n}, {\n  type: AlertController\n}, {\n  type: NavController\n}];\n\nProfilePage = __decorate([Component({\n  selector: 'app-profile',\n  template: __NG_CLI_RESOURCE__0,\n  styles: [__NG_CLI_RESOURCE__1]\n})], ProfilePage);\nexport { ProfilePage };","map":{"version":3,"mappings":";;;;AAAA,SAASA,SAAT,QAAkC,eAAlC;AACA,SAASC,MAAT,QAAuB,iBAAvB;AACA,SAASC,MAAT,EAAiBC,gBAAjB,EAAmCC,YAAnC,QAAuD,mBAAvD;AAEA,SAASC,iBAAT,EAA4BC,eAA5B,EAA6CC,aAA7C,QAAkE,gBAAlE;AACA,SAASC,WAAT,QAA4B,+BAA5B;AACA,SAASC,aAAT,QAA8B,iCAA9B;IAOaC,WAAW,SAAXA,WAAW;EAItBC,YACSC,aADT,EAEUC,WAFV,EAGUC,MAHV,EAIUC,iBAJV,EAKUC,eALV,EAMUC,GANV,EAM4B;IALnB;IACC;IACA;IACA;IACA;IACA;IARV,eAAU,IAAV;EAYC;;EAEKC,MAAM;IAAA;;IAAA;MACV,MAAM,KAAI,CAACL,WAAL,CAAiBK,MAAjB,EAAN;;MACA,KAAI,CAACJ,MAAL,CAAYK,aAAZ,CAA0B,GAA1B,EAA+B;QAAEC,UAAU,EAAE;MAAd,CAA/B;IAFU;EAGX;;EAEDC,MAAM;IACJ,KAAKJ,GAAL,CAASK,GAAT;EACD;;EAEDC,QAAQ,IACP;;EAEKC,WAAW;IAAA;;IAAA;MACf,MAAMC,KAAK,SAASvB,MAAM,CAACwB,QAAP,CAAgB;QAClCC,OAAO,EAAE,EADyB;QAElCC,YAAY,EAAE,KAFoB;QAGlCC,UAAU,EAAE1B,gBAAgB,CAAC2B,MAHK;QAIlCC,MAAM,EAAE3B,YAAY,CAACF,MAJa,CAIL;;MAJK,CAAhB,CAApB;;MAOA,IAAIuB,KAAJ,EAAW;QACT,MAAMO,OAAO,SAAS,MAAI,CAACjB,iBAAL,CAAuBkB,MAAvB,EAAtB;QACA,MAAMD,OAAO,CAACE,OAAR,EAAN;QAEA,MAAMC,MAAM,SAAS,MAAI,CAACvB,aAAL,CAAmBwB,WAAnB,CAA+BX,KAA/B,EAAsC,MAAI,CAACb,aAAL,CAAmByB,OAAnB,CAA2BC,GAAjE,CAArB;QACAN,OAAO,CAACO,OAAR;;QAEA,IAAI,CAACJ,MAAL,EAAa;UACX,MAAMK,KAAK,SAAS,MAAI,CAACxB,eAAL,CAAqBiB,MAArB,CAA4B;YAC9CQ,MAAM,EAAE,eADsC;YAE9CC,OAAO,EAAE,4CAFqC;YAG9CC,OAAO,EAAE,CAAC,IAAD;UAHqC,CAA5B,CAApB;UAKA,MAAMH,KAAK,CAACN,OAAN,EAAN;QACD;MACF;IAvBc;EAwBhB;;AApDqB;;;QAPfzB;;QADAD;;QAJAP;;QAGAI;;QAAmBC;;QAAiBC;;;AAShCG,WAAW,eALvBV,SAAS,CAAC;EACT4C,QAAQ,EAAE,aADD;EAETC,8BAFS;;AAAA,CAAD,CAKc,GAAXnC,WAAW,CAAX;SAAAA","names":["Component","Router","Camera","CameraResultType","CameraSource","LoadingController","AlertController","NavController","AuthService","AvatarService","ProfilePage","constructor","avatarService","authService","router","loadingController","alertController","nav","logout","navigateByUrl","replaceUrl","goBack","pop","ngOnInit","changeImage","image","getPhoto","quality","allowEditing","resultType","Base64","source","loading","create","present","result","uploadImage","profile","uid","dismiss","alert","header","message","buttons","selector","template"],"sourceRoot":"","sources":["/Users/chineduetoh/Desktop/IONIC PROJECTS/Go_Rider/src/app/pages/profile/profile.page.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { Camera, CameraResultType, CameraSource } from '@capacitor/camera';\nimport { StatusBar } from '@capacitor/status-bar';\nimport { LoadingController, AlertController, NavController } from '@ionic/angular';\nimport { AuthService } from 'src/app/services/auth.service';\nimport { AvatarService } from 'src/app/services/avatar.service';\n\n@Component({\n  selector: 'app-profile',\n  templateUrl: './profile.page.html',\n  styleUrls: ['./profile.page.scss'],\n})\nexport class ProfilePage implements OnInit {\n\n  profile = null;\n\n  constructor(\n    public avatarService: AvatarService,\n    private authService: AuthService,\n    private router: Router,\n    private loadingController: LoadingController,\n    private alertController: AlertController,\n    private nav: NavController\n  ) {\n\n  \n  }\n\n  async logout() {\n    await this.authService.logout();\n    this.router.navigateByUrl('/', { replaceUrl: true });\n  }\n\n  goBack(){\n    this.nav.pop();\n  }\n\n  ngOnInit() {\n  }\n\n  async changeImage() {\n    const image = await Camera.getPhoto({\n      quality: 90,\n      allowEditing: false,\n      resultType: CameraResultType.Base64,\n      source: CameraSource.Camera, // Camera, Photos or Prompt!\n    });\n\n    if (image) {\n      const loading = await this.loadingController.create();\n      await loading.present();\n\n      const result = await this.avatarService.uploadImage(image, this.avatarService.profile.uid);\n      loading.dismiss();\n\n      if (!result) {\n        const alert = await this.alertController.create({\n          header: 'Upload failed',\n          message: 'There was a problem uploading your avatar.',\n          buttons: ['OK'],\n        });\n        await alert.present();\n      }\n    }\n  }\n}"]},"metadata":{},"sourceType":"module"}