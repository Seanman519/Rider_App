{"ast":null,"code":"import _asyncToGenerator from \"/Users/chineduetoh/Desktop/IONIC PROJECTS/Go_Rider/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { __decorate } from \"tslib\";\nimport __NG_CLI_RESOURCE__0 from \"./details.page.html?ngResource\";\nimport __NG_CLI_RESOURCE__1 from \"./details.page.scss?ngResource\";\nimport { Component } from '@angular/core';\nimport { Auth } from '@angular/fire/auth';\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\nimport { Router } from '@angular/router';\nimport { AuthService } from 'src/app/services/auth.service';\nimport { AvatarService } from 'src/app/services/avatar.service';\nimport { OverlayService } from 'src/app/services/overlay.service';\nlet DetailsPage = class DetailsPage {\n  constructor(overlay, authy, auth, avatar, router) {\n    this.overlay = overlay;\n    this.authy = authy;\n    this.auth = auth;\n    this.avatar = avatar;\n    this.router = router;\n  }\n\n  ngOnInit() {\n    this.form = new FormGroup({\n      fullname: new FormControl(null, {\n        validators: [Validators.required, Validators.minLength(1), Validators.maxLength(200)]\n      }),\n      lastname: new FormControl(null, {\n        validators: [Validators.required, Validators.minLength(1), Validators.maxLength(200)]\n      }),\n      email: new FormControl(null, {\n        validators: [Validators.required, Validators.minLength(1), Validators.maxLength(200)]\n      })\n    });\n  }\n\n  signIn() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      try {\n        if (!_this.form.valid) {\n          _this.form.markAllAsTouched();\n\n          return;\n        }\n\n        _this.overlay.showLoader(\"\");\n\n        _this.authy.onAuthStateChanged( /*#__PURE__*/function () {\n          var _ref = _asyncToGenerator(function* (user) {\n            const result = yield _this.avatar.createUser(_this.form.value.fullname + '' + _this.form.value.lastname, _this.form.value.email, '', user.phoneNumber, user.uid);\n\n            if (!result) {\n              _this.overlay.showAlert('Upload failed', 'There was a problem uploading your avatar.');\n            } else {\n              yield _this.avatar.createCard('Cash', 0, 'cash', 'None');\n\n              _this.overlay.hideLoader();\n\n              _this.router.navigateByUrl('home');\n            }\n\n            console.log(\"Uploaded\");\n          });\n\n          return function (_x) {\n            return _ref.apply(this, arguments);\n          };\n        }());\n      } catch (e) {\n        console.log(e);\n      }\n    })();\n  }\n\n};\n\nDetailsPage.ctorParameters = () => [{\n  type: OverlayService\n}, {\n  type: Auth\n}, {\n  type: AuthService\n}, {\n  type: AvatarService\n}, {\n  type: Router\n}];\n\nDetailsPage = __decorate([Component({\n  selector: 'app-details',\n  template: __NG_CLI_RESOURCE__0,\n  styles: [__NG_CLI_RESOURCE__1]\n})], DetailsPage);\nexport { DetailsPage };","map":{"version":3,"mappings":"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","names":["Component","Auth","FormControl","FormGroup","Validators","Router","AuthService","AvatarService","OverlayService","DetailsPage","constructor","overlay","authy","auth","avatar","router","ngOnInit","form","fullname","validators","required","minLength","maxLength","lastname","email","signIn","valid","markAllAsTouched","showLoader","onAuthStateChanged","user","result","createUser","value","phoneNumber","uid","showAlert","createCard","hideLoader","navigateByUrl","console","log","e","selector","template"],"sourceRoot":"","sources":["/Users/chineduetoh/Desktop/IONIC PROJECTS/Go_Rider/src/app/pages/details/details.page.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { Auth } from '@angular/fire/auth';\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\nimport { Router } from '@angular/router';\nimport { AuthService } from 'src/app/services/auth.service';\nimport { AvatarService } from 'src/app/services/avatar.service';\nimport { OverlayService } from 'src/app/services/overlay.service';\n\n@Component({\n  selector: 'app-details',\n  templateUrl: './details.page.html',\n  styleUrls: ['./details.page.scss'],\n})\nexport class DetailsPage implements OnInit {\n\n  form: FormGroup;\n\n  constructor(\n    private overlay: OverlayService, private authy: Auth, private auth: AuthService, private avatar: AvatarService, private router: Router\n  ) { }\n\n  ngOnInit() {\n    this.form = new FormGroup({\n      fullname: new FormControl(null, {\n        validators: [Validators.required, Validators.minLength(1), Validators.maxLength(200)]\n      }),\n      lastname: new FormControl(null, {\n        validators: [Validators.required, Validators.minLength(1), Validators.maxLength(200)]\n      }),\n      email: new FormControl(null, {\n        validators: [Validators.required, Validators.minLength(1), Validators.maxLength(200)]\n      }),\n    });\n  }\n  \n  async signIn() {\n    try {\n      if(!this.form.valid) {\n        this.form.markAllAsTouched();\n        return;\n      }\n      this.overlay.showLoader(\"\");\n      this.authy.onAuthStateChanged(async (user)=>{\n      const result = await this.avatar.createUser(this.form.value.fullname + '' + this.form.value.lastname, this.form.value.email, '', user.phoneNumber, user.uid)\n     \n      if (!result) {\n        this.overlay.showAlert('Upload failed','There was a problem uploading your avatar.')\n      }else{\n        await this.avatar.createCard('Cash', 0, 'cash', 'None')\n        this.overlay.hideLoader();\n        this.router.navigateByUrl('home');\n       \n      }\n      console.log(\"Uploaded\");\n    })\n    } catch(e) {\n      console.log(e);\n    }\n  }\n}\n"]},"metadata":{},"sourceType":"module"}